class RWVulnerabilityToken : RwStatusEffectToken {

    Default {
        Inventory.Amount 5;
        Inventory.MaxAmount 10;
        RwStatusEffectToken.ReductionPeriodTicks TICRATE;
    }

    override string GetStatusName() {
        return "VULNERABLE";
    }

    override Color GetColorForUi() {
        return Font.CR_BRICK;
    }

    override void doEffectOnRwPlayer() {
        if (owner.player.DamageCount < 5) {
            owner.player.DamageCount = 5;
        }
    }

    override void ModifyDamage(int damage, Name damageType, out int newdamage, bool passive, Actor inflictor, Actor source, int flags) {
        if (owner.Health <= 0) {
            return;
        }
        debug.print("Owner "..owner.GetClassName().." with health"..owner.Health..": damage before "..damage);
        // Passive is True if the attack is being received by the owner. False if the attack is being dealt by the owner.
        if (passive) {
            newdamage *= 2;
        }
        debug.print("  Damage after "..newdamage);
    }
}